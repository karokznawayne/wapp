<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatVerse ‚Äî Modern Messaging</title>
    <meta name="description" content="ChatVerse - A premium social messaging app with groups, friends, and real-time communication.">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Auth Section -->
        <div id="auth-container">
            <div class="auth-card glass">
                <div class="auth-logo">
                    <div class="logo-icon">üí¨</div>
                    <h1>ChatVerse</h1>
                    <p class="auth-subtitle">Connect. Chat. Collaborate.</p>
                </div>
                <div class="tabs">
                    <button id="tab-login" class="active">Sign In</button>
                    <button id="tab-register">Sign Up</button>
                </div>
                
                <form id="login-form">
                    <div class="input-group">
                        <span class="input-icon material-symbols-rounded">person</span>
                        <input type="text" id="login-username" placeholder="Username" required>
                    </div>
                    <div class="input-group">
                        <span class="input-icon material-symbols-rounded">lock</span>
                        <input type="password" id="login-password" placeholder="Password" required>
                    </div>
                    <div class="input-group" id="mfa-input-group" style="display:none;">
                        <span class="input-icon material-symbols-rounded">security</span>
                        <input type="text" id="login-mfa" placeholder="MFA Code">
                    </div>
                    <button type="submit" class="btn-primary">
                        <span>Sign In</span>
                        <span class="material-symbols-rounded">arrow_forward</span>
                    </button>
                </form>

                <form id="register-form" style="display:none;">
                    <div class="input-group">
                        <span class="input-icon material-symbols-rounded">person_add</span>
                        <input type="text" id="reg-username" placeholder="Choose a username" required>
                    </div>
                    <div class="input-group">
                        <span class="input-icon material-symbols-rounded">lock</span>
                        <input type="password" id="reg-password" placeholder="Create a password" required>
                    </div>
                    <button type="submit" class="btn-primary">
                        <span>Create Account</span>
                        <span class="material-symbols-rounded">arrow_forward</span>
                    </button>
                </form>
                <p id="auth-message"></p>
            </div>
        </div>

        <!-- MFA Setup Section -->
        <div id="mfa-setup-container" style="display:none;">
            <div class="auth-card glass">
                <div class="auth-logo">
                    <div class="logo-icon">üîê</div>
                    <h2>Secure Your Account</h2>
                    <p class="auth-subtitle">Scan this QR Code with Google Authenticator</p>
                </div>
                <div id="qrcode-container" style="display: flex; justify-content: center; margin-bottom: 1.5rem;"></div>
                <form id="mfa-verify-form">
                    <div class="input-group">
                        <span class="input-icon material-symbols-rounded">pin</span>
                        <input type="text" id="verify-token" placeholder="Enter 6-digit Code" required>
                    </div>
                    <button type="submit" class="btn-primary">
                        <span>Verify & Enable</span>
                    </button>
                </form>
                <button id="skip-mfa" class="btn-ghost">Skip for now</button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-container" style="display:none;">
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="user-profile">
                        <div class="avatar" id="my-avatar">U</div>
                        <div class="user-info">
                            <h3 id="current-username">User</h3>
                            <span class="status-dot online"></span>
                            <span class="status-text">Online</span>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button id="admin-btn" class="icon-btn" style="display:none;" title="Admin Panel">
                            <span class="material-symbols-rounded">admin_panel_settings</span>
                        </button>
                        <button id="logout-btn" class="icon-btn" title="Logout">
                            <span class="material-symbols-rounded">logout</span>
                        </button>
                    </div>
                </div>
                
                <div class="search-box">
                    <span class="material-symbols-rounded search-icon">search</span>
                    <input type="text" id="user-search" placeholder="Search users...">
                    <button id="search-btn" class="icon-btn-sm">
                        <span class="material-symbols-rounded">arrow_forward</span>
                    </button>
                    <div id="search-results" style="display: none;"></div>
                </div>

                <div class="nav-section">
                    <div class="section-header">
                        <h4><span class="material-symbols-rounded">chat</span> Chats</h4>
                    </div>
                    <ul id="chat-list"></ul>
                    
                    <div class="section-header">
                        <h4><span class="material-symbols-rounded">group</span> Friends</h4>
                    </div>
                    <ul id="friend-list"></ul>

                    <div class="section-header">
                        <h4><span class="material-symbols-rounded">groups</span> Groups</h4>
                    </div>
                    <ul id="group-list"></ul>
                    <div class="sidebar-action">
                        <button id="create-group-btn">
                            <span class="material-symbols-rounded">add</span>
                            <span>New Group</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="main-chat" id="main-chat-area">
                <div id="chat-header" style="display:none;">
                    <div id="back-btn" style="display:none;">
                        <span class="material-symbols-rounded">arrow_back</span>
                    </div>
                    <div class="avatar" id="chat-avatar"></div>
                    <div class="chat-header-info">
                        <div id="chat-title">Select a chat</div>
                        <div id="chat-subtitle" class="chat-subtitle">tap for info</div>
                    </div>
                    <button id="group-info-btn" class="icon-btn" style="display:none;">
                        <span class="material-symbols-rounded">info</span>
                    </button>
                </div>

                <div id="chat-messages">
                    <div class="placeholder">
                        <div class="placeholder-content">
                            <div class="placeholder-icon">üí¨</div>
                            <h2>ChatVerse</h2>
                            <p>Select a conversation to start messaging</p>
                        </div>
                    </div>
                </div>

                <form id="chat-input-form" style="display:none;">
                    <button type="button" class="icon-btn-sm emoji-btn">
                        <span class="material-symbols-rounded">mood</span>
                    </button>
                    <input type="text" id="message-input" placeholder="Type a message..." required autocomplete="off">
                    <button type="submit" class="send-btn">
                        <span class="material-symbols-rounded">send</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="admin-panel" style="display:none;">
            <div class="admin-container glass">
                <div class="admin-header">
                    <h2><span class="material-symbols-rounded">admin_panel_settings</span> Admin Dashboard</h2>
                    <button id="close-admin" class="icon-btn">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>
                <div id="admin-stats" class="stats-grid"></div>
                <div class="user-management">
                    <h3>All Users</h3>
                    <table id="users-table">
                        <thead>
                            <tr><th>ID</th><th>Username</th><th>Role</th><th>MFA</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Modal for Group Creation -->
        <div id="modal-overlay" style="display:none;">
            <div class="modal-card glass">
                <h3><span class="material-symbols-rounded">group_add</span> Create New Group</h3>
                <div class="input-group">
                    <span class="input-icon material-symbols-rounded">label</span>
                    <input type="text" id="new-group-name" placeholder="Group Name">
                </div>
                <div class="modal-actions">
                    <button id="confirm-create-group" class="btn-primary">Create</button>
                    <button id="cancel-modal" class="btn-ghost">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Modal for Group Info -->
        <div id="group-info-modal-overlay" style="display:none;">
            <div class="modal-card glass" style="width: 420px; max-height: 80vh; display: flex; flex-direction: column;">
                <div class="modal-header">
                    <h3 id="modal-group-name">Group Info</h3>
                    <button id="close-group-info" class="icon-btn">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>
                
                <div id="group-actions" style="margin-bottom: 1rem; display: none;">
                    <h4>Add Member</h4>
                    <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                         <select id="friend-select-dropdown">
                             <option value="">Select a friend...</option>
                         </select>
                         <button id="add-member-btn" class="btn-primary btn-sm">Add</button>
                    </div>
                </div>

                <h4>Members (<span id="member-count">0</span>)</h4>
                <ul id="group-member-list" class="member-list"></ul>
                
                <button id="leave-group-btn" class="btn-danger">
                    <span class="material-symbols-rounded">logout</span>
                    Leave Group
                </button>
            </div>
        </div>

    </div>
    <script src="app.js"></script>
</body>
</html>
